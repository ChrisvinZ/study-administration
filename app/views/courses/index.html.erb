<%= stylesheet_link_tag "courseOverview.css" %>


<ol class = "legend" >
  <li style="list-style: square; color:#8DE28D;">Veranstaltung absolviert</li>
  <li style="list-style: square; color:#ADD8E6;">Veranstaltung eingeplant </li>
  <li style="list-style: square;">Veranstaltung noch nicht belegt</li>


</ol>


<p>

<h3> Aktuelles Semester: <%= get_current_semester_and_year_from_date(Time.now) %> </h3>

</p>

<form method="POST" action="/courses">
   <select name="semesters" id = "42" >
      <option>Alle</option> 
      <option>Sommersemester</option>
      <option>Wintersemester</option>
      <option>Unregelmäßig</option> 
      
   </select>

  </form>


<br>

  <%if logged_in?%>

    <!-- Ebene 1: Courses -->
    <!-- get_current_semester calculates and displays the current Semester.-->
    <label for="Studiengang">Mein persönlicher Studiengang</label>
  
      <ol class = "tree">
      <%course = @courses.find_by_id(current_user.course_id) %>
      <% unless course.nil? %>
        <li class = "course">
          <label for="course"><%= link_to course.name,  course %></label>
          <input type="checkbox"  id="course" style="width: 20px; height: 20px;"/>
            <ol id="outer">
              <!-- Ebene 2: Blocks -->
              <% e = course.blocks.order("name").map %>
              <% e.each do |blocks| %>
                <li class = "course">
                    <!-- <span class="glyphicon glyphicon-folder-close"></span> -->
                    <label for="blocks"><%= link_to blocks.name, blocks %></label>
                    <input style="border: solid green 1px !important;" type="checkbox"  id="blocks"/>
                      <ol id="inner">

                          

                          <% f = blocks.events.order("title").map %>
                          <% f.each do |event| %>
                          <% if current_user.events_users.map(&:event_id).include?(event.id) %>                              
                            <%case convert_date_to_number(event.events_users.find_by_user_id(current_user.id).semester) %>
                            <%when "geplant" %>
                              <li class="plannedfile <%= event.cycle %>">
                               <%= link_to event.title, event  %>

                                <%when "bestanden"%>
                                  <li class="passedfile <%= event.cycle %>">
                                  <%= link_to event.title, event  %>

                            <%end%>

                           <%else%>
                           <li class="file <%= event.cycle %>">
                                
                           <%= link_to event.title, event  %>

                              <% end %>
                              </li>
                          <% end %>
                      </ol>
              </li>
              <% end %>
            </ol>


        </li>
      <% end %>
    </ol>
 

<%end%>


<%= link_to 'Neuer Studiengang', new_course_path, class: 'btn btn-success' %>

<%= params[:semesters] %>
