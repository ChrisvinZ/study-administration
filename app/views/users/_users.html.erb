<%= hidden_field_tag :direction, params[:direction] %>
<%= hidden_field_tag :sort, params[:sort] %>
<!-- new table design for all the users -->
<table class="table table-striped">
  <thead>
    <tr class="sorts">
        <th><%= sortable "email", "Email" %></th>
        <th><%= sortable "role", "Status" %></th>
        <th>Actions</th>
    </tr>
  </thead>

  <!-- list email of user and options/buttons to show profil, to change passwort and to delete profile -->
  <tbody>
    <% @users.each do |user| %>
      <tr> 
        <td><%= user.email %></td>
        <td><%= user.role %></td>
        <td>
          <div class="btn-group btn-group-justified btn_group_wide1">
          
          <!-- if profile exists, admin can edit it -->
          <%if user.profile != nil%> 
              <% if can? :edit, @user %>
                <td class="col-sm-1"><%= link_to profile_path(user.profile), class: 'btn btn-default' do%> <i class="glyphicon glyphicon-eye-open middle_icon"></i> <%end%></td>
              <% end %>
              <% if can? :destroy, @user %>
                <%if user.id != current_user.id%>
                  <td class="col-sm-2"><%= link_to user, method: :delete, data: { confirm: 'Sicher?' } , class: 'btn btn-default' do %> <i class="glyphicon glyphicon-trash middle_icon"></i> <% end%></td>   
                <%end %>
              <%end %>
          
          <%else%>
            <!-- deleted "no profile" button, format of table todo -->
            <!-- <td class="col-sm-1"><%= link_to 'No Profile',user, class: 'btn btn-default'%></td> -->
            <% if can? :destroy, @user %>
              <%if user.id != current_user.id%>
                <td class="col-sm-2"><%= link_to user, method: :delete, data: { confirm: 'Sicher?' } , class: 'btn btn-default' do %> <i class="glyphicon glyphicon-trash middle_icon"></i> <% end%></td>   
              <%end %>
            <%end %>
          <% end %>
        </div> 
        </td>
      </tr>
    <% end %>
  </tbody>
</table>


<%= will_paginate @users %>
