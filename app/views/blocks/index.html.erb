<h1>BlÃ¶cke</h1>

<!-- changed layout of table -->
<table class="table table-striped">
  <thead>
    <tr>
      <th>Name</th>
      <th>Zu erreichende Credits</th>
      <th>Veranstaltungen</th>
      <th style="width:20%"></th>
    </tr>
  </thead>

<!-- changed links to buttons -->
<!-- added tooltip to glyphicons -->
  <tbody>
    <% @blocks.order("name").each do |block| %>
      <tr>
        <td><%= block.name %></td>
        <td><%= block.credits_min %></td>
        <td><%= block.events.map { |a| a.title }.join("<br>").html_safe %></td>
        <td>
        <div class="btn-group btn-group-justified">
          <%= link_to block, class: "btn btn-default" do %>
            <span class="has-tooltip" data-toggle="tooltip" title="Anzeigen">  
              <i class="glyphicon glyphicon-eye-open middle_icon"></i>
            </span>
          <% end %>
          <% if can? :edit, @block %>
          <%= link_to edit_block_path(block), class: "btn btn-default" do %>
            <span class="has-tooltip" data-toggle="tooltip" title="Bearbeiten">            
              <i class="glyphicon glyphicon-pencil middle_icon"></i>
            </span>
          <% end %>
          <% end %>
          <% if can? :destroy, @block %>
          <%= link_to block, method: :delete, data: { confirm: 'Sicher?' } , class: "btn btn-default" do %>
            <span class="has-tooltip" data-toggle="tooltip" title="LÃ¶schen">
              <i class="glyphicon glyphicon-trash middle_icon"></i>
            </span>
          <% end %>
          <% end %>
          </div>
          </td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>

<%= link_to 'New Block', new_block_path, class: "btn btn-success" %>
